<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aqara.common.mapper.SpeedyContentMapper">
	<resultMap id="BaseResultMap" type="com.aqara.common.entity.SpeedyContent">
		<result column="id" jdbcType="INTEGER" property="id" />
		<result column="themeId" jdbcType="INTEGER" property="themeId" />
		<result column="type" jdbcType="INTEGER" property="type" />
		<result column="team" jdbcType="INTEGER" property="team" />
		<result column="theme" jdbcType="INTEGER" property="theme" />
		<result column="company" jdbcType="INTEGER" property="company" />
		<result column="contentText" jdbcType="VARCHAR" property="contentText" />
		<result column="contentFile" jdbcType="VARCHAR" property="contentFile" />
		<result column="contentType" jdbcType="VARCHAR" property="contentType" />
		<result column="createName" jdbcType="VARCHAR" property="createName" />
		<result column="createTime" jdbcType="TIMESTAMP" property="createTime" />
		<result column="updateName" jdbcType="VARCHAR" property="updateName" />
		<result column="updateTime" jdbcType="TIMESTAMP" property="updateTime" />
	</resultMap>
	
	<select id="select" resultType="com.aqara.common.entity.SpeedyContent">
		 SELECT c.id, c.themeId, t2.theme, c.contentText, c.contentFile, c.contentType,
			t1.team, t1.company, t1.type, c.createName, c.createTime, c.updateName, c.updateTime 
			FROM aqara.speedyteam t1, aqara.speedytheme t2, aqara.speedycontent c 
    		where t2.id = c.themeId and t1.id = t2.teamId 
    	<if test="team!=null and team!=''"> 
    		AND t1.team like concat('%',#{team,jdbcType=VARCHAR},'%') 
		</if>
		<if test="theme!=null and theme!=''">  
    		AND t2.theme like concat('%',#{theme,jdbcType=VARCHAR},'%') 
		</if>
		<if test="type!=null and type!=''">
    		AND t1.type like concat('%',#{type,jdbcType=VARCHAR},'%') 
		</if>
		order by c.themeId
	</select>
	
	<insert id="insert" parameterType="com.aqara.common.entity.SpeedyContent" useGeneratedKeys="true" keyProperty="id">
		insert into speedyContent ( 
			themeId, contentText, contentFile, contentType, createName, createTime
		) 
		values ( #{themeId}, #{contentText}, #{contentFile}, #{contentType}, #{createName}, NOW())
	</insert>
	
	<insert id="update" parameterType="com.aqara.common.entity.SpeedyContent">
		update speedyContent set 
			themeId = #{themeId}, 
			contentText = #{contentText},
			contentFile = #{contentFile},
			contentType = #{contentType},
			updateName = #{updateName}, 
			updateTime = NOW() 
		where id = #{id}
	</insert>
	
	<delete id="delete" parameterType="com.aqara.common.entity.SpeedyContent">
		delete from speedyContent where id in 
		<foreach collection="ids" item="id" separator="," open="(" close=")">
            #{id}
        </foreach>
	</delete>

</mapper>