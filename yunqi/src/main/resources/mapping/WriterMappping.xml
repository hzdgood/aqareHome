<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yunqi.common.mapper.WriterMapper">

    <select id="selectNumber" resultType="com.yunqi.common.entity.Writer">
        select sum(install) as install, sum(debug) as debug
        from writer
        where workId = #{workId}
    </select>

    <insert id="insert" parameterType="com.yunqi.common.entity.Writer" useGeneratedKeys="true" keyProperty="id">
        # 新增
        insert into writer (projectId, productId, schemeId, type, workId, techId, contribution,
                            install, debug, createName, createTime) value (
               #{projectId}, #{productId}, #{schemeId},
               #{type},
               #{workId}, #{techId}, #{contribution},
               #{install}, #{debug}, #{createName}, NOW()
            )
    </insert>

    <insert id="insertHead" parameterType="com.yunqi.common.entity.Writer" useGeneratedKeys="true" keyProperty="id">
        # 新增
        insert into writer (projectId, workId, techId, type, contribution, createName, createTime) value (
              #{projectId}, #{workId}, #{techId}, #{type}, #{contribution}, #{createName}, NOW()
            )
    </insert>

    <insert id="update" parameterType="com.yunqi.common.entity.Writer">
        # 修改
        update writer
        set install = #{install},
            debug   = #{debug}
        where id = #{id}
    </insert>

    <insert id="simpleWriter" parameterType="com.yunqi.common.entity.Writer">
        # 修改
        update writer
        set type         = #{type},
            sumWork      = #{sumWork},
            contribution = #{contribution},
            updateName   = #{updateName},
            updateTime   = now()
        where id = #{id}
    </insert>

    <insert id="delete" parameterType="com.yunqi.common.entity.Writer">
        # 无效
        update writer
        set disabled   = 'false',
            updateName = #{updateName},
            updateTime = now()
        where id = #{id}
    </insert>
</mapper>