<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yunqi.common.viewMapper.WorkViewMapper">
    <select id="select" resultType="com.yunqi.common.view.WorkView">
        # 工单查询
        select * from workView w where disabled is null
        <if test="projectId!=null">
            and projectId like #{projectId,jdbcType=VARCHAR}
        </if>
        <if test="workId!=null">
            and workId = #{workId}
        </if>
        <if test="techId!=null">
            and ( techId like #{techId,jdbcType=VARCHAR} or techNames like #{techId,jdbcType=VARCHAR} )
        </if>
        <if test="projectName!=null and projectName!=''">
            and ( projectName like '%${projectName}%'
            or telephone like '%${projectName}%'
            or address like '%${projectName}%' )
        </if>
        <if test="status!=null and status!=''">
            and w.workStatus is null
        </if>
        <if test="headId!=null">
            and headId = #{headId} group by projectId
        </if>
    </select>
</mapper>